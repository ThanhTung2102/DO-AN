<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
  <script src="../Script/angularjs.js"></script>
    <link rel="stylesheet" href="../CSS/Patient_Portal_Medical.css">
    <link rel="stylesheet" href="../CSS/header.css">
    <link rel="stylesheet" href="../CSS/footer.css">
    <link rel="stylesheet" href="../CSS/responsivePT2.css">
    
    <script>
      let app= angular.module("angularApp",[]);
      app.controller("inforController", function($scope, $http){
        $http({
          method:"GET",
          url:"../Jason/User_Account.json"
        }).then(function success(response){
          $scope.patientInfor= response.data;
          $scope.Address=function($scope){
            return patientInfor[0].Street + " "+patientInfor[0].Ward+" "+patientInfor[0].Province
          }
        },
        function error(response){
          $scope.error=response.statusText;
        }
        )
      })

      app.controller("paymentController", function($scope, $http){
        $http({
          method:"GET",
          url:"../Jason/payment.json"
        }).then(function success(response){
          $scope.patientInfor= response.data;
        },
        function error(response){
          $scope.error=response.statusText;
        }
        )
      })
      app.controller("scheduleController", function($scope, $http){
        $http({
          method:"GET",
          url:"../Jason/schedule.json"
        }).then(function success(response){
          $scope.schedule= response.data;
        },
        function error(response){
          $scope.error=response.statusText;
        }
        )
      })
      app.controller("eventController", function($scope, $http){
        $http({
          method:"GET",
          url:"../Jason/event.json"
        }).then(function success(response){
          $scope.event= response.data;
        },
        function error(response){
          $scope.error=response.statusText;
        }
        )
      })
    </script>
    <title>Patient Information</title>

</head>
<body ng-app="angularApp" >
  
  <iframe src="./header.html" width="100%" height="100px" frameborder="0" name="header" ></iframe>

  <!-- header cho patient-portal  -->
    <div class="pt-header-3" >
        <div class="pt-header-3__image">
            <img src="../IMAGES/avatar1.png" alt="Không thể tải hình">
        </div>
        <div class="pt-header-3__content" ng-controller="inforController">
            <div>Hello, {{patientInfor.user[0].Name}} </div>
            <hr>
            <div>{{patientInfor.user[0].Street}}, {{patientInfor.user[0].Ward}}, {{patientInfor.user[0].City}}</div>
            <div><span>Phone number:</span>{{patientInfor.user[0].Phone}}</div>
            <div><span>Email: {{patientInfor.user[0].Email}} </span></div>
        </div>
    </div>
    <div class="pt1-nav">
      <div class="pt1-nav__left">
        <div class="pt-navbar_1"><a href="Homepage.html">Homepage</a></div>
        <span> > </span>
        <div class="pt-navbar_2"><a href="#">Medical record</a></div>
      </div>
      <div class="pt1-nav__right">
        <button onclick="editInfor()" class="pt1-nav__right--button"><i class="fa fa-edit">Edit</i></button>
      </div>
    </div>
    
    <div class="pt1-main">
        <div class="pt1-main__column pt1-main__column--1 ">
           <div class="pt1-main__column1--infor" ng-controller="inforController">
            <div class="pt1-main1__box pt1-main1__box1">
                <div><img src="../IMAGES/avatar1.png" alt="Avatar"></div>
                <div>{{patientInfor.user[0].Name}}</div>
                <div>{{patientInfor.user[0].DateOfBirth}}</div>
                <div>{{patientInfor.user[0].Email}}</div>
            </div>
            <div class="pt1-main1__box pt1-main1__box2">
                <div><span> Adress </span><br>
                  {{patientInfor.user[0].Street}}, {{patientInfor.user[0].Ward}}, {{patientInfor.user[0].City}}</div>
                <div><span>City</span><br>{{patientInfor.user[0].City}} </div>
                <div><span>Nation</span><br>{{patientInfor.user[0].Nationality}} </div>
                <div><span>Job</span><br>{{patientInfor.user[0].Job}}</div>
                <div><span>Health Insuarance Number</span><br>{{patientInfor.user[0].HealthInsuaranceCardNumber}}</div>
                <div><span>ID number</span><br>{{patientInfor.user[0].IDNumber}}</div>
            </div>
           </div> 
            <div class="pt1-main__table">
                <div id="pt2-main">
                    <div class="pt2-main__container">
                      
                      <div class="group-tabs">
                        <!-- Nav tabs -->
                        <ul class="nav nav-tabs" role="tablist">
                          <li role="presentation" class="active">
                            <i class="fa fa-calendar"></i>
                            <a href="#tab1" aria-controls="tab1" role="tab" data-toggle="tab">Medical examination schedule</a></li>
                          <li role="presentation">
                            <i class="fa fa-credit-card"></i>
                            <a href="#tab2" aria-controls="tab2" role="tab" data-toggle="tab">Hospital fee payment history</a></li>
                          <li role="presentation">
                            <i class="fa fa-bullhorn"></i>
                            <a href="#tab3" aria-controls="tab3" role="tab" data-toggle="tab">Announcement/Event</a></li>
                          
                        </ul>
                  
                        <!-- Tab panes -->
                        <div class="tab-content" ng-controller="scheduleController">
                          <div role="tabpanel" class="tab-pane active" id="tab1">
                            <div class="pt-main__tab1">
                              <div class="tab1-row">
                                <div class="tab1-row__item">
                                  <div><span>Time</span></div>
                                  <div> {{schedule[0].Time}}</div>
                                </div>
                                <div class="tab1-row__item">
                                  <div><span>Treatment</span></div>
                                  <div>{{schedule[0].Treatment}}</div>
                                </div>
                                <div class="tab1-row__item">
                                  <div><span>Dentist</span></div>
                                  <div>{{schedule[0].Dentist}}</div>
                                </div>
                                <div class="tab1-row__item">
                                  <div><span>Patient number</span></div>
                                  <div>{{schedule[0].Patientnumber}}</div>
                                </div>
                              </div>
                            </div>
                  
                          </div>
                          <div role="tabpanel" class="tab-pane tab-pane__2" id="tab2" ng-controller="paymentController">
                            <table>
                              <tr>
                                  <th>Patient Name</th>
                                  <th>Date</th>
                                  <th>Content</th>
                                  <th>Patient code</th>
                                  <th>Reciept number</th>
                                  <th>Money</th>
                                  <th>Status</th>
                              </tr>
                              <tr ng-repeat="p in patientInfor">
                                  <td>{{p.PatientName}}</td>
                                  <td>{{p.Date}}</td>
                                  <td>{{p.Content}}</td>
                                  <td>{{p.PatientCode}}</td>
                                  <td>{{p.RecieptNumber}}</td>
                                  <td>{{p.Money}}</td>
                                  <td>{{p.Status}}</td>
                              </tr>
                              
                          </table>
                          </div>
                          <div role="tabpanel" class="tab-pane" id="tab3" ng-controller="eventController">
                            <div class="tab3-row" ng-repeat="e in event">
                              <div class="pt2-col1">{{e.Time}}</div>
                              <div class="pt2-col2">{{e.Content}}</div>
                              <div class="pt2-col3"><button>New</button></div>
                            </div>
                            
                      
                          </div>
                          
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <script src="https://code.jquery.com/jquery-3.1.1.min.js" type=text/javascript></script>
                   <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" type=text/javascript></script>
                  <script src="../js/custom.js" type=text/javascript></script>    
            </div>
            </div>
            <div class="pt1-main__column pt1-main__column--2">
            <div class=" pt1-main1__box3">
                <div class="pt1-main1__box3--title">
                    <div>Note</div>
                    <div></div>
                </div>
                <div id="btnSave" class="pt1-main1__box3--note">
                    <div><textarea name="" id="valueNote" cols="32" rows="5"></textarea></div>
                    <div><button  onclick="saveNote()">Save notes</button></div>
                </div>
                <div class="pt1-main1__box3--footer">
                    <div><img src="../IMAGES/human_icon.png" alt=""></div>
                    <div><span>Có hẹn khám</span><br>Doctor Lưu Hương Giang</div>
                    <div>25/11/2021</div>
                </div>
            </div>
            <div class="pt1-main__column2--file">
                <div class="pt1-main__column--title">Files/Documents</div>
                <div class="pt1-main__item--file">
                    <a id="downloadMe" href="../Images/patient portal.pdf">Patient record</a>
                    <a  href="../Images/patient portal.pdf" download="patient portal.pdf"><i class="fa fa-download"></i></a>
                </div>
                <div class="pt1-main__item--file">
                     <a href="../Images/patient portal.pdf">X-ray photo Result</a>
                    <a href="../Images/patient portal.pdf" download="X-ray photo Result.pdf"><i class="fa fa-download"></i></a>
                </div>
                <div class="pt1-main__item--file">
                    <a href="../Images/patient portal.pdf"> General results</a>
                    <a href="../Images/patient portal.pdf" download="General results.pdf"><i class="fa fa-download"></i></a>
                </div>
                <div class="pt1-main__item--file">
                    <a href="../Images/patient portal.pdf"> Medical record</a>
                    <a href="../Images/patient portal.pdf" download="Medical record.pdf"><i class="fa fa-download"></i></a>
                </div>
            </div>
        </div>    
      </div>
          <!--footer  -->
          <iframe src="./footer.html" frameborder="0" style="width: 100%" height="243px" name="footer" ></iframe>
    
<script>
  function editInfor(){
    window.location.href="edit-infor.html"
  }
   
    function saveNote(){
      
      if (localStorage) {
  	    // document.getElementById("btnSave").addEventListener('submit', function() {
  	      let notes = document.getElementById('valueNote').value;
  	      localStorage.setItem('name', notes);
  	  // })
    }
    };
  window.onload = function() {

    // Retrieve user name
    let note = localStorage.getItem('name');
    if (note != "undefined" && note != null) {
      document.getElementById('valueNote').value =  note;
    } else {
      document.getElementById('valueNote').value = note;
    }  
  };
</script>
    
</body>
</html>
